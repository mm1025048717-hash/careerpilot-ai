# 🌐 解决网络超时问题

## 问题说明

你看到的警告：
```
WARNING: Retrying... TimeoutError('_ssl.c:989: The handshake operation timed out')
```

**原因**：
1. 清华镜像源连接超时（网络波动）
2. pip 默认超时时间太短
3. SSL 握手失败

## ✅ 解决方案（按顺序尝试）

### 方案1：等待当前安装完成（推荐）

**不要关闭窗口！** 虽然有警告，但 pip 会自动重试。通常会成功。

等待看到：
- ✅ 配置完成！
- 测试 DeepSeek API...

如果最终成功了，就不需要其他操作。

---

### 方案2：使用快速安装脚本

如果当前安装卡住不动超过5分钟，按 `Ctrl+C` 停止，然后：

**双击运行**：`backend\快速安装.bat`

这个脚本：
- ✅ 不使用镜像源（直接官方）
- ✅ 单独安装每个包
- ✅ 更好的错误处理

---

### 方案3：手动安装（最稳定）

打开新的 CMD 窗口，运行：

```cmd
cd C:\Users\陈宣任\BOss直聘数字员工\backend
call venv\Scripts\activate

REM 增加超时时间
set PIP_DEFAULT_TIMEOUT=120

REM 逐个安装核心包
pip install flask==3.0.0
pip install flask-cors==4.0.0
pip install openai==1.54.0
pip install anthropic==0.18.0
pip install python-dotenv==1.0.0
pip install requests==2.31.0
pip install beautifulsoup4==4.12.3
pip install playwright==1.41.0

REM 安装浏览器
playwright install chromium
```

---

### 方案4：换网络环境

如果上面都失败：

1. **手机热点**：用手机4G/5G热点连接电脑
2. **VPN/代理**：使用代理
3. **换时间**：晚上网络较好时再试

---

## 🎯 快速判断：安装是否成功

### 检查1：Python 包是否安装

```cmd
cd backend
call venv\Scripts\activate
pip list
```

应该看到：
```
Flask           3.0.0
flask-cors      4.0.0
openai          1.54.0
anthropic       0.18.0
playwright      1.41.0
...
```

### 检查2：测试 DeepSeek

```cmd
python test_deepseek.py
```

如果看到：
```
✅ 连接成功！
AI 回复：...
```

说明一切正常！

---

## 💡 立即行动（根据当前情况）

### 情况A：安装还在进行中（有进度）

**等待** - 让它继续，通常会成功

### 情况B：安装卡住不动（超过5分钟无反应）

1. 按 `Ctrl+C` 停止
2. **双击**：`backend\快速安装.bat`

### 情况C：安装已完成（但有警告）

直接测试：
```cmd
cd backend
call venv\Scripts\activate
python test_deepseek.py
```

---

## 🔍 详细诊断

如果还是有问题，运行诊断命令：

```cmd
cd backend
call venv\Scripts\activate

REM 测试网络连接
curl https://pypi.org/simple/
curl https://api.deepseek.com

REM 检查 pip 版本
pip --version

REM 检查已安装的包
pip list | findstr "openai flask"
```

---

## 📊 常见错误和解决方案

### 错误1：`SSLError`
**解决**：
```cmd
pip install --trusted-host pypi.org --trusted-host files.pythonhosted.org openai==1.54.0
```

### 错误2：`ReadTimeoutError`
**解决**：增加超时
```cmd
pip install --timeout 300 openai==1.54.0
```

### 错误3：`ProxyError`
**解决**：禁用代理
```cmd
set HTTP_PROXY=
set HTTPS_PROXY=
pip install openai==1.54.0
```

---

## ✅ 最简单的方法

**如果你不想折腾**：

1. 等待当前安装完成（即使有警告）
2. 测试是否成功：`python test_deepseek.py`
3. 如果成功 → 🎉 完成！
4. 如果失败 → 双击 `backend\快速安装.bat`

---

现在的建议：

**先等待2-3分钟**，看看安装是否自动完成。如果一直卡住，再用快速安装脚本。

